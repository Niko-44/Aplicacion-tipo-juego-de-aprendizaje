<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel de Administración - Misiones y Logros</title>
  <link rel="stylesheet" href="css/admin.css">
</head>
<body>
  <!-- FORMULARIO DE LOGIN -->
  <div id="loginForm">
    <div class="container">
      <div class="card login-container">
        <div class="login-header">
          <h1>Panel de Administración</h1>
          <p>Ingresa tus credenciales para continuar</p>
        </div>
        <div class="form-group">
          <label for="username">Usuario:</label>
          <input type="text" id="username" placeholder="Ingresa tu usuario">
        </div>
        <div class="form-group">
          <label for="password">Contraseña:</label>
          <input type="password" id="password" placeholder="Ingresa tu contraseña">
        </div>
        <button class="btn btn-success" onclick="login()" style="width: 100%;">Ingresar</button>
        <div id="loginError" class="message message-error" style="display: none;"></div>
      </div>
    </div>
  </div>

  <!-- PANEL DE ADMINISTRACIÓN -->
  <div id="adminPanel">
    <div class="container">
      <div class="admin-header">
        <h1>Panel de Administración</h1>
        <button class="btn btn-secondary" onclick="logout()">Cerrar Sesión</button>
      </div>

      <!-- CAMBIO DE USUARIO / CONTRASEÑA -->
      <div class="card">
        <h2>Configuración de Cuenta</h2>
        <div class="form-group">
          <label for="newUser">Nuevo Usuario:</label>
          <input type="text" id="newUser" placeholder="Nuevo nombre de usuario">
        </div>
        <div class="form-group">
          <label for="newPass">Nueva Contraseña:</label>
          <input type="password" id="newPass" placeholder="Nueva contraseña">
        </div>
        <button class="btn btn-success" onclick="cambiarCredenciales()">Guardar Cambios</button>
        <div id="configMsg" class="message" style="display: none;"></div>
      </div>

      <!-- ADMINISTRACIÓN DE MISIONES -->
      <div class="card">
        <h2>Administración de Misiones</h2>
        
        <div class="form-container">
          <h3 id="form-title">Agregar Nueva Misión</h3>
          <input type="hidden" id="misionId">
          <div class="form-group">
            <label for="titulo">Título:</label>
            <input type="text" id="titulo" placeholder="Título de la misión">
          </div>
          <div class="form-group">
            <label for="descripcion">Descripción:</label>
            <textarea id="descripcion" rows="3" placeholder="Descripción de la misión"></textarea>
          </div>
          
          <div class="form-group">
            <label>Pasos de la misión:</label>
            <div class="pasos-container" id="pasosContainer">
              <!-- Los pasos se agregarán aquí dinámicamente -->
            </div>
            <div class="agregar-paso-container">
              <input type="text" id="nuevoPaso" class="agregar-paso-input" placeholder="Nuevo paso">
              <button class="btn btn-small" onclick="agregarPaso()">Agregar Paso</button>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="tipo">Tipo:</label>
              <select id="tipo">
                <option value="">Selecciona un tipo</option>
                <option value="diaria">Diaria</option>
                <option value="semanal">Semanal</option>
                <option value="mensual">Mensual</option>
                <option value="especial">Especial</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="nivel">Nivel:</label>
              <select id="nivel">
                <option value="">Selecciona un nivel</option>
                <option value="facil">Fácil</option>
                <option value="intermedio">Intermedio</option>
                <option value="dificil">Difícil</option>
              </select>
            </div>
          </div>
          
          <div class="form-actions">
            <button class="btn btn-success" onclick="guardarMision()">Guardar Misión</button>
            <button class="btn btn-secondary" onclick="resetFormMision()">Cancelar</button>
          </div>
        </div>

        <h3>Misiones Existentes</h3>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Título</th>
                <th>Descripción</th>
                <th>Nivel</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="misionesTable">
              <tr>
                <td colspan="4" style="text-align: center;">Cargando misiones...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="section-divider"></div>

      <!-- ADMINISTRACIÓN DE LOGROS -->
      <div class="card">
        <h2>Administración de Logros</h2>
        
        <div class="form-container">
          <h3 id="logro-form-title">Agregar Nuevo Logro</h3>
          <input type="hidden" id="logroId">
          <div class="form-group">
            <label for="logroNombre">Nombre:</label>
            <input type="text" id="logroNombre" placeholder="Nombre del logro">
          </div>
          <div class="form-group">
            <label for="logroDescripcion">Descripción:</label>
            <textarea id="logroDescripcion" rows="3" placeholder="Descripción del logro"></textarea>
          </div>
          <div class="form-group">
            <label for="logroPuntos">Puntos requeridos:</label>
            <input type="number" id="logroPuntos" placeholder="Puntos necesarios" min="0">
          </div>
          <div class="form-actions">
            <button class="btn btn-success" onclick="guardarLogro()">Guardar Logro</button>
            <button class="btn btn-secondary" onclick="resetFormLogro()">Cancelar</button>
          </div>
        </div>

        <h3>Logros Existentes</h3>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Descripción</th>
                <th>Puntos Requeridos</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="logrosTable">
              <tr>
                <td colspan="4" style="text-align: center;">Cargando logros...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <script src="js/admin.js"></script>

</body>
</html>